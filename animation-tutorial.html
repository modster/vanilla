<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Theatre.js Tutorial</title>
  <style>
    body {
      margin: 0;
      color: white;
      background: black;
      font-family: sans-serif;
    }
  </style>
</head>

<body>
  <h1 id="article-heading" style="text-align: center">Welcome</h1>
  <script type="module">
    import 'https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.5.0-insiders.88df1ef/dist/core-only.min.js'
    // We can now access Theatre.core and Theatre.studio from here
    const { core } = Theatre
    const projectState = {
      "sheetsById": {
        "Sheet 1": {
          "staticOverrides": {
            "byObject": {
              "Heading 1": {}
            }
          },
          "sequence": {
            "subUnitsPerUnit": 30,
            "length": 10,
            "type": "PositionalSequence",
            "tracksByObject": {
              "Heading 1": {
                "trackData": {
                  "we52D56Wpp": {
                    "type": "BasicKeyframedTrack",
                    "__debugName": "Heading 1:[\"y\"]",
                    "keyframes": [
                      {
                        "id": "2nxUhSSWU-",
                        "position": 0,
                        "connectedRight": true,
                        "handles": [
                          0.5,
                          1,
                          0.5,
                          0
                        ],
                        "value": 0
                      },
                      {
                        "id": "1w0FPVQpKX",
                        "position": 5.733,
                        "connectedRight": true,
                        "handles": [
                          0.5630857267087497,
                          1.9063923089897117,
                          0.5,
                          0
                        ],
                        "value": 522.7457171770716
                      }
                    ]
                  },
                  "LKSaAfUfMf": {
                    "type": "BasicKeyframedTrack",
                    "__debugName": "Heading 1:[\"opacity\"]",
                    "keyframes": [
                      {
                        "id": "yyJgJAaJeD",
                        "position": 0,
                        "connectedRight": true,
                        "handles": [
                          0.5,
                          1,
                          0.5,
                          0
                        ],
                        "value": 1
                      },
                      {
                        "id": "sPhJfpH2At",
                        "position": 2.867,
                        "connectedRight": true,
                        "handles": [
                          0.5,
                          1,
                          0.5,
                          0
                        ],
                        "value": 0
                      },
                      {
                        "id": "9iassrMrzD",
                        "position": 5.733,
                        "connectedRight": true,
                        "handles": [
                          0.5,
                          1,
                          0.5,
                          0
                        ],
                        "value": 1
                      }
                    ]
                  }
                },
                "trackIdByPropPath": {
                  "[\"y\"]": "we52D56Wpp",
                  "[\"opacity\"]": "LKSaAfUfMf"
                }
              }
            }
          }
        }
      },
      "definitionVersion": "0.4.0",
      "revisionHistory": [
        "QMOSDjW4UGHj4uHm"
      ]
    }

    // studio.initialize() // Start the Theatre.js UI

    const project = core.getProject('HTML Animation Tutorial', {
      state: projectState,
    })
    const sheet = project.sheet('Sheet 1')
    const obj = sheet.object('Heading 1', {
      y: 0, // you can use just a simple default value
      opacity: core.types.number(1, { range: [0, 1] }), // or use a type constructor to customize
    })

    const articleHeadingElement = document.getElementById('article-heading')

    obj.onValuesChange((obj) => {
      articleHeadingElement.style.transform = `translateY(${obj.y}px)`
      articleHeadingElement.style.opacity = obj.opacity
    })
    project.ready.then(() => {
      sheet.sequence.play({ iterationCount: Infinity, range: [0, 6] })
    })
  </script>

</body>

</html>